<!DOCTYPE html>
<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
	<title>valimised_districts</title>
	<style>
		html {
			height:100%;
		}
		body {
			background-color:#FFF6F3;
			margin:0;
			height:100%;
		}
	</style>
	<!-- copy these lines to your document head: -->

	<meta name="viewport" content="user-scalable=yes, width=720" />
	<link href='https://fonts.googleapis.com/css?family=PT+Serif&subset=latin' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=PT+Sans&subset=latin' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="valimised_districts.hyperesources/style.css" />
	<script type="text/javascript" src="valimised_districts.hyperesources/data.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<script>
	var maakonnadColor=	document.getElementsByClassName('valimisringkond');
	
	var selectedArea;
	var info = [];
	var index;
	function maakond(a){
		document.getElementById('valdNimi').innerHTML = '&nbsp';
		selectedArea =  a.id.replace('valimisringkond','');
		var name =  parseFloat(selectedArea)//valimisRow[selectedArea][1];
		name--;
		index =  name;
		document.getElementById('maakondNimi').style.backgroundColor = 'rgba(207, 200, 197, 0.2)';
		document.getElementById('maakondNimi').innerHTML = valimisRow[name][1];
		document.getElementById('maakondNimi').classList.remove('animate');
		document.getElementById('maakondNimi').classList.add('animate');
		loadChart();
	};
	
	function vald(a){
		var selectedVald = a.id.replace('_s','').replace('_','').toLowerCase();
		document.getElementById('valdNimi').innerHTML = '&nbsp'
		document.getElementById('valdNimi').innerHTML = a.id.replace('_s','').replace('_',' ');
		selectedArea = selectedVald;
		loadChart(); 
	};
	
	function clean(){
		
	};
	
	function loadChart(){
		document.getElementById("chart").innerHTML='&nbsp';
		document.getElementById("chart").innerHTML='<canvas id="chartjs" style="height:100%;width: 100%; max-width:720px"></canvas>';
		
		var info = valimisRow[index];
		Chart.defaults.global.defaultFontFamily = 'PT Serif';
		Chart.defaults.global.maintainAspectRatio = false;
		Chart.defaults.global.animation.duration = 500;
		Chart.defaults.global.legend.display = false;
		Chart.defaults.global.legend.position = 'bottom';
		Chart.defaults.global.legend.labels.usePointStyle = true;
		
		var ctx = document.getElementById("chartjs");
		var myChart = new Chart(ctx, {
    		type: 'bar',
    		data: {
    	    	labels: [ "KE", "SD", "RE", "IS", "VE", "EK", "E2", "RO"],
    	    	datasets: [{
					label: '',
    	        	data: [ info[3], info[5], info[2], info[4], info[6], info[7], info[9], info[8]],
    	        	borderColor: ["#157b5e", "#fa0f0c", "#f4dc2c", "#1b9cc5", "#79bfd7", "#724515", "#19778c", "#89b047"],
   		         	backgroundColor: ["#157b5e", "#fa0f0c", "#f4dc2c", "#1b9cc5", "#79bfd7", "#724515", "#19778c", "#89b047"],
    	        	borderWidth: 0,
        	    	fill: true,
        	    	pointRadius:0,	
        	    	pointHitRadius: 10            
        		}]
   			},
   			options: {
   				layout:{
   					padding:{
   						top:20
   					}
   				},
   				tooltips:{
   					callbacks:{
   						label: 
   						function(tooltipItem, data) {
   							var number = tooltipItem.yLabel;
        	        		return data.datasets[tooltipItem.datasetIndex].label + '' + number.toLocaleString('et-EE', { maximumFractionDigits: 2 }) + '%';
        	        	}
   					}
   				},    			
   				plugins: {
					datalabels: {
						borderColor: '#57897c',
						borderWidth: 0,
						borderRadius: 4,
						formatter: //changin decimal separation to commas
							function(value, context){
							var number = value;
							var newNumber = number.toLocaleString('et-EE', { maximumFractionDigits: 0 });
							return newNumber ;
						},
						align: 'end',
						offset: 0,
						anchor: 'end',
						color: '#323232',
						font: {
							weight: 'bold'
						}
					}
				},
	   			scales: {
        			xAxes:[{
        				stacked: false,
        				gridLines:{
        					tickMarkLength: 10,
        					drawBorder: false,
        					display: false,
        				},
        				ticks:{
        					display:true
        				}
        			}],
            		yAxes:[{
            			position: 'right',
            			stacked: false,
            			gridLines:{
            				drawBorder: false,
            				display: false,
            			},
            	    	ticks: {
            	    		beginAtZero:true, 
            	    	}
            		}]
       	 		}
    		}	
		});
	};
	
</script>			

	<!-- end copy -->
  </head>
  <body>
	<!-- copy these lines to your document: -->

	<div id="valimiseddistricts_hype_container" style="margin:auto;position:relative;width:100%;height:1000px;overflow:hidden;">
		<script type="text/javascript" charset="utf-8" src="valimised_districts.hyperesources/valimiseddistricts_hype_generated_script.js?43890"></script>
	</div>

	<!-- end copy -->
	


	<!-- text content for search engines: -->

	<div style="display:none" aria-hidden=true>

		<div>Sotsiaaldemokraatlik Erakond</div>
		<div>
</div>
		<div>EKRE</div>
		<div></div>
		<div>Eesti 200</div>
		<div>Reformierakond</div>
		<div>Eestimaa Rohelised</div>
		<div>Keskerakond</div>
		<div></div>
		<div>ISAMAA</div>
		<div>Allikas: Vabariigi Valimiskomisjon  / Graafik: Miguel Álvarez /</div>
		<div>Erakondade osakaal ringkonnahäältestVajuta valismisringkonnale</div>
		<div></div>
		<div>Vabaerakond</div>

	</div>

	<!-- end text content: -->

  </body>
</html>
